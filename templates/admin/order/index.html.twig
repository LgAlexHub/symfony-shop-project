{% extends 'admin/base.html.twig' %}

{% block title %}
	- Commandes
{% endblock %}

{% block body %}
	<h1 class="text-center my-3 text-2xl font-san underline text-slatea-800">Mes commandes</h1>

	<div class="mx-auto mt-3 ml-3">
		<table class="table-fixed w-full border-separate border-spacing-2">
			<thead>
				<tr>
					<td class="bg-slate-600 border border-slate-300 text-white px-2 py-1">
						Prénom
					</td>
					<td class="bg-slate-600 text-white border border-slate-300 px-2 py-1">
						Nom
					</td>
					<td class="bg-slate-600 text-white border border-slate-300 px-2 py-1">
						Email
					</td>
					<td class="bg-slate-600 text-white border border-slate-300 px-2 py-1">
						Nombre de référence
					</td>
					<td class="bg-slate-600 text-white border border-slate-300 px-2 py-1">
						Commande valide 
					</td>
					<td class="bg-slate-600 text-white border border-slate-300 px-2 py-1">
						Total Panier
					</td>
					<td class="bg-slate-600 text-white border border-slate-300 px-2 py-1">
						Statut la commande
					</td>
					<td class="bg-slate-600 text-white border border-slate-300 px-2 py-1">
						Date de la commande
					</td>
					<td class="bg-slate-600 text-white border border-slate-300 px-2 py-1"></td>
				</tr>
			</thead>
			<tbody>
				{% for order in orders %}
					<tr class="even:bg-white odd:bg-blue-50">
						<td class="border border-slate-300 px-2">{{order['order'].clientFirstName}}</td>
						<td class="border border-slate-300 px-2">{{order['order'].clientLastName}}</td>
						<td class="border border-slate-300 px-2 w-auto text-sm">{{order['order'].email}}</td>
						<td class="border border-slate-300 text-center text-blue-800 w-2/6 border border-slate-300">
							<span class="rounded-full px-2 border border-purple-400 bg-purple-400 text-white">
								{{order['order'].items|length}}
							</span>
						</td>
						{% if order['order'].isValid %}
							<td class="text-green-600 border text-center border-slate-300 px-2 "><strong>Oui</strong></td>
						{% else %}
							<td class="text-red-600 border text-center border-slate-300 px-2 "><strong>Non</strong></td>
						{% endif %}
						<td class="border border-slate-300 px-2  text-center">{{order['totalPrice']/100|number_format(2)}} €</td>
						{% if order['order'].isDone %}
							<td class="text-green-600 border text-center border-slate-300 px-2 "><strong>Terminée</strong></td>
						{% else %}
							<td class="text-orange-600 border text-center border-slate-300 px-2 "><strong>En cours</strong></td>
						{% endif %}
						<td class="border border-slate-300 px-2  text-center">{{order['order'].createdAt|date("d/m/Y à H:i")}}</td>
						<td class="space-x-8 py-3 px-3 bg-white text-center">
							<a href="{{path('admin.orders.show', {'uuid' :order['order'].uuid})}}">
								<i class="fa-solid fa-magnifying-glass text-blue-700 border border-blue-700 hover:text-white hover:border-transparent hover:bg-blue-700 rounded-md px-3 py-3"></i>
							</a>
						</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
{% endblock %}
